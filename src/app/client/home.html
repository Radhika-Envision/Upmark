<div class="header">
<div class="container">
    <div class="toolbar">
        <button class="btn btn-default btn-round" title="Print"
                ng-if="!edit.model"
                onclick="print()">
            <i class="fa fa-print"></i>
        </button>
    </div>
    <h2>Timeline</h2>
</div>
</div>

<div class="container">
    <ul class="list-results fa-ul fa-ul-big">
        <li ng-repeat="action in activity.actions">
            <i class="fa fa-li fa-border fa-border-fill"
                    ng-class="icons(action)[0]">
                <i class="fa fa-badge fa-plus"
                        ng-if="icons(action).length > 1"></i>
            </i>
            <a ng-href="#{{url(action)}}"
                    title="Open this {{obType(action)}}"
                    ng-if="action.obType != null">
                {{action.subject.name}}
                <span class="text-muted">
                    {{verbs(action)}} the {{obType(action)}}
                </span>
                {{action.objectDesc}}
                <p class="text-muted">
                    {{action.created * 1000 | timeAgo:'medium'}}
                    <i class="fa fa-thumb-tack" ng-if="action.sticky"
                        title="Pinned"></i>
                </p>
            </a>
            <div ng-if="action.obType == null">
                {{action.subject.name}}<span class="text-muted"> said:</span>
                {{action.objectDesc}}
                <p class="text-muted">
                    {{action.created * 1000 | timeAgo:'medium'}}
                    <i class="fa fa-thumb-tack" ng-if="action.sticky"
                        title="Pinned"></i>
                </p>
            </div>
        </li>
        <li ng-if="!activity.actions.length">
            <i class="fa fa-li fa-border fa-border-fill fa-moon-o"></i>
            <a href="#/surveys" title="Browse programs">
                There are no events for this time period.
                <p>Perhaps you'd like to browse the programs?</p>
            </a>
        </li>
    </ul>

    <form novalidate name="form" id="post" ng-if="checkRole('post_message')">
        <h3>Broadcast Message</h3>
        <div class="form-group">
            <label for="message" class="sr-only">Message</label>
            <textarea class="autoresize form-control"
                id="message" name="message"
                ng-model="post.message"></textarea>
        </div>
        <div class="form-inline text-right">
            <div class="form-group" ng-if="checkRole('post_to_all')">
                <div class="btn-group">
                    <span class="btn-group-addon">
                        To:
                    </span>
                    <button class="btn btn-default"
                            ng-class="{'active': post.to == 'all'}"
                            ng-click="post.to = 'all'"
                            title="Post to all users">
                        Everyone
                    </button>
                    <button class="btn btn-default"
                            ng-class="{'active': post.to == 'org'}"
                            ng-click="post.to = 'org'"
                            title="Post only to users in my organisation">
                        My Organisation
                    </button>
                </div>
            </div>
            <div class="form-group">
                <button class="btn btn-default"
                        ng-class="{'active': post.sticky}"
                        ng-click="post.sticky = !post.sticky"
                        title="Keep post at top">
                    <i class="fa fa-thumb-tack"></i>
                    Pin
                </button>
                <button class="btn btn-default"
                        title="Send this message"
                        ng-click="postMessage()">
                    <i class="fa fa-envelope-o"></i>
                    Post
                </button>
            </div>
        </div>
    </form>
</div>
