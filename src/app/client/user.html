<div>

<div class="survey-tree secondary">
    <h2>
        <i class="fa fa-fw fa-user"></i>
        {{user.name}}
        <button class="btn btn-round" title="Edit"
                ng-click="edit.edit()"
                ng-if="!edit.model">
            <i class="fa fa-pencil"></i></button>
        <button class="btn btn-round" title="Save"
                ng-click="edit.save()"
                ng-if="edit.model">
            <i class="fa fa-check"></i></button>
        <button class="btn btn-round" title="Cancel"
                ng-click="edit.cancel()"
                ng-if="edit.model">
            <i class="fa fa-times"></i></button>
    </h2>
</div>

<editor-error class="measure" edit="edit"></editor-error>

<div class="measure" ng-if="edit.model">
    <form>
        <div class="form-group">
            <label for="user_name">Name</label>
            <input type="text" class="form-control" id="user_name"
                ng-model="edit.model.name" />
        </div>
        <div class="form-group">
            <label for="user_email">Email</label>
            <input type="text" class="form-control" id="user_email"
                ng-model="edit.model.email" />
        </div>
        <div class="form-group">
            <label for="user_role">Role</label>
            <select type="text" class="form-control" id="user_role"
                ng-options="role.id as role.name for role in roles"
                ng-model="edit.model.role"></select>
        </div>
        <div class="form-group">
            <label for="user_org">Utility</label>
            <input type="text" class="form-control" id="user_org"
                ng-model="edit.model.organisation" />
        </div>
    </form>
</div>

<div class="measure" ng-if="!edit.model">
    <dl>
        <dt>Role</dt>
        <dd>{{roleDict[user.role].name}}</dd>
    </dl>
    <dl>
        <dt>Email</dt>
        <dd>{{user.email}} <span class="text-muted">TODO: Hide this in JSON</span></dd>
    </dl>
    <dl>
        <dt>Utility</dt>
        <dd><a ng-href="/org/{{utility.id}}">{{utility.name}}</a></dd>
    </dl>
</div>

</div>
